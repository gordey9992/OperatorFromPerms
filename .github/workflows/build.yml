name: üèóÔ∏è Build OperatorFromPerms

on:
  push:
    branches: [ "main", "master", "development" ]
  pull_request:
    branches: [ "main", "master" ]
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é
    inputs:
      version:
        description: '–í–µ—Ä—Å–∏—è –¥–ª—è —Å–±–æ—Ä–∫–∏'
        required: false
        default: 'auto'

env:
  PLUGIN_NAME: OperatorFromPerms
  JAVA_VERSION: '21'

jobs:
  validate:
    name: üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
    
    - name: üìù –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
      run: |
        echo "üîé –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞..."
        REQUIRED_FILES=("pom.xml" "src/main/resources/plugin.yml" "src/main/resources/config.yml" "src/main/resources/messages.yml")
        REQUIRED_DIRS=("src/main/java/com/gordey9992/operatorfromperms")
        
        for file in "${REQUIRED_FILES[@]}"; do
          if [ -f "$file" ]; then
            echo "‚úÖ $file - –Ω–∞–π–¥–µ–Ω"
          else
            echo "‚ùå $file - –û–¢–°–£–¢–°–¢–í–£–ï–¢"
            exit 1
          fi
        done
        
        for dir in "${REQUIRED_DIRS[@]}"; do
          if [ -d "$dir" ]; then
            echo "‚úÖ $dir - –Ω–∞–π–¥–µ–Ω"
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –µ—Å—Ç—å java —Ñ–∞–π–ª—ã
            JAVA_FILES=$(find "$dir" -name "*.java" | wc -l)
            echo "üìÅ –ù–∞–π–¥–µ–Ω–æ Java —Ñ–∞–π–ª–æ–≤: $JAVA_FILES"
          else
            echo "‚ùå $dir - –û–¢–°–£–¢–°–¢–í–£–ï–¢"
            exit 1
          fi
        done
        
        echo "‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø–æ—Ä—è–¥–∫–µ!"

  build:
    name: üèóÔ∏è –°–±–æ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–∞
    runs-on: ubuntu-latest
    needs: validate
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
    
    - name: ‚òï Set up JDK 21
      uses: actions/setup-java@v4
      with:
        java-version: '21'
        distribution: 'temurin'
        cache: 'maven'
    
    - name: üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ
      run: |
        echo "üîÑ –ù–∞—á–∞–ª–æ —Å–±–æ—Ä–∫–∏ ${{ env.PLUGIN_NAME }}"
        echo "üìÖ –î–∞—Ç–∞: $(date)"
        echo "‚òï Java: 21"
        echo "üè∑Ô∏è Git commit: ${{ github.sha }}"
        echo "üéØ –í–µ—Ç–∫–∞: ${{ github.ref }}"
        echo "üë§ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä: ${{ github.actor }}"
    
    - name: üßπ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–±–æ—Ä–æ–∫
      run: mvn -B clean
    
    - name: üì¶ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞
      run: mvn -B compile
      
    - name: üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
      run: mvn -B dependency:tree
      
    - name: üõ†Ô∏è –°–±–æ—Ä–∫–∞ JAR
      run: mvn -B package -DskipTests
      
    - name: üìè –ê–Ω–∞–ª–∏–∑ —Å–±–æ—Ä–∫–∏
      run: |
        JAR_FILE=$(ls target/*.jar 2>/dev/null | head -1)
        if [ -f "$JAR_FILE" ]; then
          echo "üéâ –°–±–æ—Ä–∫–∞ –£–°–ü–ï–®–ù–ê!"
          echo "üì¶ –§–∞–π–ª: $JAR_FILE"
          echo "üìä –†–∞–∑–º–µ—Ä: $(du -h "$JAR_FILE" | cut -f1)"
          echo "üîç MD5: $(md5sum "$JAR_FILE" | cut -d' ' -f1)"
          echo "üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞–≥–∏–Ω–µ:"
          unzip -p "$JAR_FILE" plugin.yml 2>/dev/null | grep -E "(name|version|main|api-version)" || echo "–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å plugin.yml"
        else
          echo "‚ùå –°–±–æ—Ä–∫–∞ –ü–†–û–í–ê–õ–ï–ù–ê - JAR —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
          exit 1
        fi

  quality:
    name: ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
    runs-on: ubuntu-latest
    needs: build
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
    
    - name: ‚òï Set up JDK 21
      uses: actions/setup-java@v4
      with:
        java-version: '21'
        distribution: 'temurin'
    
    - name: üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ code style
      run: |
        echo "üîç –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞..."
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ TODO/FIXME
        echo "üìã –ü–æ–∏—Å–∫ TODO/FIXME:"
        find src/main/java -name "*.java" -exec grep -l "TODO\|FIXME" {} \; | while read file; do
          echo "‚ö†Ô∏è  –ù–∞–π–¥–µ–Ω –≤: $file"
          grep -n "TODO\|FIXME" "$file"
        done
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä—É—Å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        echo "üî§ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:"
        JAVA_FILES_COUNT=$(find src/main/java -name "*.java" | wc -l)
        echo "üìÅ –í—Å–µ–≥–æ Java —Ñ–∞–π–ª–æ–≤: $JAVA_FILES_COUNT"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Java
        echo "üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Java..."
        mvn -B compile > /dev/null 2>&1 && echo "‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å Java - OK" || echo "‚ùå –û—à–∏–±–∫–∏ –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ Java"
        
    - name: üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
      run: |
        echo "üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ YAML —Ñ–∞–π–ª–æ–≤..."
        
        # –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ plugin.yml
        if grep -q "name:" src/main/resources/plugin.yml && \
           grep -q "version:" src/main/resources/plugin.yml && \
           grep -q "main:" src/main/resources/plugin.yml; then
          echo "‚úÖ plugin.yml - –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç"
        else
          echo "‚ùå plugin.yml - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è"
        fi
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥–∏ –Ω–µ –ø—É—Å—Ç—ã–µ
        for config in src/main/resources/*.yml; do
          if [ -s "$config" ]; then
            echo "‚úÖ $(basename "$config") - –Ω–µ –ø—É—Å—Ç–æ–π"
          else
            echo "‚ùå $(basename "$config") - –ü–£–°–¢–û–ô!"
          fi
        done

  artifacts:
    name: üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    runs-on: ubuntu-latest
    needs: [build, quality]
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
    
    - name: ‚òï Set up JDK 21
      uses: actions/setup-java@v4
      with:
        java-version: '21'
        distribution: 'temurin'
    
    - name: üèóÔ∏è –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
      run: mvn -B clean package -DskipTests
      
    - name: üìÅ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
      run: |
        echo "üîç –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤..."
        
        # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
        mkdir -p artifacts
        echo "‚úÖ –ü–∞–ø–∫–∞ artifacts —Å–æ–∑–¥–∞–Ω–∞"
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –µ—Å—Ç—å –≤ target/
        echo "üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ target/:"
        ls -la target/ || echo "–ü–∞–ø–∫–∞ target –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
        
        # –ù–∞—Ö–æ–¥–∏–º –û–°–ù–û–í–ù–û–ô JAR —Ñ–∞–π–ª (–∏—Å–∫–ª—é—á–∞–µ–º javadoc –∏ original)
        echo "üîç –ò—â–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π JAR —Ñ–∞–π–ª..."
        JAR_FILE=$(find target -name "*.jar" ! -name "*-javadoc.jar" ! -name "original-*.jar" | head -1)
        
        if [ -z "$JAR_FILE" ]; then
          echo "‚ùå –û—Å–Ω–æ–≤–Ω–æ–π JAR —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!"
          echo "üìã –í—Å–µ JAR —Ñ–∞–π–ª—ã –≤ target/:"
          find target -name "*.jar" -type f || echo "JAR —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
          exit 1
        fi
        
        echo "‚úÖ –ù–∞–π–¥–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–π JAR: $JAR_FILE"
        
        # –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π JAR
        cp "$JAR_FILE" artifacts/
        echo "‚úÖ JAR —Ñ–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ artifacts/"
        
        # –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥–∏
        echo "üìÑ –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã..."
        if [ -f "src/main/resources/plugin.yml" ]; then
          cp src/main/resources/plugin.yml artifacts/
          echo "‚úÖ plugin.yml —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
        else
          echo "‚ùå plugin.yml –Ω–µ –Ω–∞–π–¥–µ–Ω"
          exit 1
        fi
        
        if [ -f "src/main/resources/config.yml" ]; then
          cp src/main/resources/config.yml artifacts/
          echo "‚úÖ config.yml —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
        else
          echo "‚ùå config.yml –Ω–µ –Ω–∞–π–¥–µ–Ω"
          exit 1
        fi
        
        if [ -f "src/main/resources/messages.yml" ]; then
          cp src/main/resources/messages.yml artifacts/
          echo "‚úÖ messages.yml —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
        else
          echo "‚ùå messages.yml –Ω–µ –Ω–∞–π–¥–µ–Ω"
          exit 1
        fi
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–º—è JAR —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏
        JAR_FILENAME=$(basename "$JAR_FILE")
        
        # –°–æ–∑–¥–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–±–æ—Ä–∫–µ
        echo "üìù –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é..."
        cat > artifacts/üìã-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è-–æ-—Å–±–æ—Ä–∫–µ.txt << EOF
üèóÔ∏è OperatorFromPerms - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ
==========================================

üìä –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏: ${{ github.run_number }}
- –ö–æ–º–º–∏—Ç: ${{ github.sha }}
- –í–µ—Ç–∫–∞: ${{ github.ref_name }}
- –î–∞—Ç–∞ —Å–±–æ—Ä–∫–∏: $(date)

üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:
- $JAR_FILENAME - –°–æ–±—Ä–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω JAR
- config.yml - –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- messages.yml - –§–∞–π–ª —Å–æ–æ–±—â–µ–Ω–∏–π
- plugin.yml - –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:
1. üì• –°–∫–∞—á–∞–π—Ç–µ JAR —Ñ–∞–π–ª –∏–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
2. üìÅ –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤ –ø–∞–ø–∫—É plugins/ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
3. üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (/reload –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)
4. ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –≤ plugins/OperatorFromPerms/

üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
- –í—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞: /lp user <–∏–≥—Ä–æ–∫> permission set operatorfromperms.all true
- –ö–æ–º–∞–Ω–¥—ã –ø–ª–∞–≥–∏–Ω–∞: /opf reload - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å: /opf check <–∏–≥—Ä–æ–∫>

üë• –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- gordey25690 (https://github.com/gordey9992)
- DeepSeek

üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è: MIT
EOF
        echo "‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ —Å–æ–∑–¥–∞–Ω–∞"
        
        # –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        cat > artifacts/üöÄ-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç.txt << EOF
üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - OperatorFromPerms

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
   - –ü–æ–º–µ—Å—Ç–∏—Ç–µ JAR —Ñ–∞–π–ª –≤ plugins/
   - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
   /lp user <–∏–≥—Ä–æ–∫> permission set operatorfromperms.all true

3. –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∞:
   /opf reload - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏
   /opf check <–∏–≥—Ä–æ–∫> - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
   /opf version - –≤–µ—Ä—Å–∏—è –ø–ª–∞–≥–∏–Ω–∞

üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞: https://github.com/gordey9992/OperatorFromPerms
EOF
        echo "‚úÖ –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞"
        
        echo ""
        echo "üìä –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:"
        echo "üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ artifacts:"
        ls -la artifacts/
        echo ""
        echo "üìè –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:"
        du -h artifacts/*

    - name: üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
      uses: actions/upload-artifact@v4
      with:
        name: OperatorFromPerms-v${{ github.run_number }}
        path: artifacts/
        retention-days: 30
        overwrite: true

  results:
    name: üìä –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    runs-on: ubuntu-latest
    needs: [validate, build, quality, artifacts]
    if: always()
    
    steps:
    - name: üìà –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      run: |
        echo "üìä –°–ë–û–† –°–¢–ê–¢–ò–°–¢–ò–ö–ò –°–ë–û–†–ö–ò..." >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–±–æ—Ä–∫–µ
        echo "## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |" >> $GITHUB_STEP_SUMMARY
        echo "|----------|----------|" >> $GITHUB_STEP_SUMMARY
        echo "| üî¢ –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ | ${{ github.run_number }} |" >> $GITHUB_STEP_SUMMARY
        echo "| üè∑Ô∏è –í–µ—Ç–∫–∞ | ${{ github.ref_name }} |" >> $GITHUB_STEP_SUMMARY
        echo "| üìÖ –î–∞—Ç–∞ | $(date +'%Y-%m-%d %H:%M:%S') |" >> $GITHUB_STEP_SUMMARY
        echo "| üë§ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä | ${{ github.actor }} |" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
    - name: üéØ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
      run: |
        echo "## üìä –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        # –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
        echo "| –≠—Ç–∞–ø | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |" >> $GITHUB_STEP_SUMMARY
        echo "|------|--------|--------|" >> $GITHUB_STEP_SUMMARY
        
        if [ "${{ needs.validate.result }}" == "success" ]; then
          echo "| üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ | ‚úÖ –£—Å–ø–µ—Ö | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ |" >> $GITHUB_STEP_SUMMARY
        else
          echo "| üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ | ‚ùå –ü—Ä–æ–≤–∞–ª | –û—à–∏–±–∫–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ |" >> $GITHUB_STEP_SUMMARY
        fi
        
        if [ "${{ needs.build.result }}" == "success" ]; then
          echo "| üèóÔ∏è –°–±–æ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ | ‚úÖ –£—Å–ø–µ—Ö | JAR —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω |" >> $GITHUB_STEP_SUMMARY
        else
          echo "| üèóÔ∏è –°–±–æ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ | ‚ùå –ü—Ä–æ–≤–∞–ª | –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ |" >> $GITHUB_STEP_SUMMARY
        fi
        
        if [ "${{ needs.quality.result }}" == "success" ]; then
          echo "| ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ | ‚úÖ –£—Å–ø–µ—Ö | Code style –ø—Ä–æ–≤–µ—Ä–µ–Ω |" >> $GITHUB_STEP_SUMMARY
        else
          echo "| ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ | ‚ùå –ü—Ä–æ–≤–∞–ª | –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º –∫–æ–¥–∞ |" >> $GITHUB_STEP_SUMMARY
        fi
        
        if [ "${{ needs.artifacts.result }}" == "success" ]; then
          echo "| üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ | ‚úÖ –£—Å–ø–µ—Ö | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–æ—Ç–æ–≤—ã |" >> $GITHUB_STEP_SUMMARY
        else
          echo "| üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ | ‚ùå –ü—Ä–æ–≤–∞–ª | –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ |" >> $GITHUB_STEP_SUMMARY
        fi
        
        echo "" >> $GITHUB_STEP_SUMMARY
        
    - name: üì¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö
      if: needs.artifacts.result == 'success'
      run: |
        echo "## üì¶ –ì–æ—Ç–æ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "üéâ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é." >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### üì• –ö–∞–∫ —Å–∫–∞—á–∞—Ç—å:" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Actions**" >> $GITHUB_STEP_SUMMARY
        echo "2. –í—ã–±–µ—Ä–∏—Ç–µ —ç—Ç—É —Å–±–æ—Ä–∫—É (**üèóÔ∏è Build OperatorFromPerms #${{ github.run_number }}**)" >> $GITHUB_STEP_SUMMARY
        echo "3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ **Artifacts**" >> $GITHUB_STEP_SUMMARY
        echo "4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **OperatorFromPerms-v${{ github.run_number }}** –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "- `OperatorFromPerms-1.0.0.jar` - –°–æ–±—Ä–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω" >> $GITHUB_STEP_SUMMARY
        echo "- `config.yml` - –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏" >> $GITHUB_STEP_SUMMARY
        echo "- `messages.yml` - –§–∞–π–ª —Å–æ–æ–±—â–µ–Ω–∏–π" >> $GITHUB_STEP_SUMMARY
        echo "- `plugin.yml` - –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞" >> $GITHUB_STEP_SUMMARY
        echo "- `üìã-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è-–æ-—Å–±–æ—Ä–∫–µ.txt` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" >> $GITHUB_STEP_SUMMARY
        echo "- `üöÄ-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç.txt` - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
    - name: ‚ùå –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
      if: needs.artifacts.result != 'success'
      run: |
        echo "## ‚ùå –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "‚ö†Ô∏è –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–±–æ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "1. **–õ–æ–≥–∏ —Å–±–æ—Ä–∫–∏** - –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —É–ø–∞–≤—à–µ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π" >> $GITHUB_STEP_SUMMARY
        echo "2. **–°—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞** - –≤—Å–µ –ª–∏ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ?" >> $GITHUB_STEP_SUMMARY
        echo "3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Maven** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å pom.xml" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "üîß **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**" >> $GITHUB_STEP_SUMMARY
        echo "- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã" >> $GITHUB_STEP_SUMMARY
        echo "- –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Java –∫–æ–¥–∞" >> $GITHUB_STEP_SUMMARY
        echo "- –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ Maven" >> $GITHUB_STEP_SUMMARY
        echo "- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ YAML —Ñ–∞–π–ª—ã" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
    - name: üéâ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      if: needs.artifacts.result == 'success'
      run: |
        echo "## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "–í–∞—à –ø–ª–∞–≥–∏–Ω **OperatorFromPerms** —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### üéÆ –ß—Ç–æ –¥–∞–ª—å—à–µ:" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "1. **üì• –°–∫–∞—á–∞–π—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** (—Å–º. –≤—ã—à–µ)" >> $GITHUB_STEP_SUMMARY
        echo "2. **üîÑ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** - –ø–æ–º–µ—Å—Ç–∏—Ç–µ JAR –≤ plugins/" >> $GITHUB_STEP_SUMMARY
        echo "3. **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞** —á–µ—Ä–µ–∑ LuckPerms" >> $GITHUB_STEP_SUMMARY
        echo "4. **üéØ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø–ª–∞–≥–∏–Ω–∞" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "---" >> $GITHUB_STEP_SUMMARY
        echo "**üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:** [GitHub Repository](https://github.com/gordey9992/OperatorFromPerms)" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "*–°–æ–±—Ä–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Minecraft*" >> $GITHUB_STEP_SUMMARY
        
    - name: üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
      run: |
        if [ "${{ needs.artifacts.result }}" == "success" ]; then
          echo "üéâ –°–ë–û–†–ö–ê #${{ github.run_number }} –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê!"
          echo "üì¶ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è"
        else
          echo "‚ùå –°–ë–û–†–ö–ê #${{ github.run_number }} –ó–ê–í–ï–†–®–ï–ù–ê –° –û–®–ò–ë–ö–ê–ú–ò"
          echo "üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"
        fi
